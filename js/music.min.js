!function(t){var i={getId:function(t){return document.getElementById(t)},getClass:function(t,i){var o=null,s=[];o=void 0!=i?i:document;for(var a=new RegExp("\\b"+t+"\\b","i"),n=o.getElementsByTagName("*"),e=0;e<n.length;e++)a.test(n[e].className)&&s.push(n[e]);return s},addClass:function(t,i,o){var s=t.className.split(" "),a=s.indexOf(o);a>-1&&(s[a]=i),t.className=s.join(" ")},changeNum:function(t){return 1*t>9?t:"0"+t},stopPropagation:function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},step:1,flag:!1,rotateNum:0,audioTimer:null,audioDuration:0,soundCtrFlag:!1,soundStep:0,init:function(){this.audio=this.getClass("audio-music")[0],this.QQ=this.getClass("qq")[0],this.audios(),this.Events();var t=this;t.audioMusic.addEventListener("timeupdate",function(){t.audioDuration=parseInt(t.audioMusic.duration,10);var i=parseInt(t.audioMusic.currentTime,10);t.audioLine.style.width=parseInt(i/t.audioDuration*250,10)+"px",t.audioDuration&&"number"==typeof t.audioDuration&&(t.audioTime.innerHTML=t.changeNum(Math.floor((t.audioDuration-i)/60))+":"+t.changeNum((t.audioDuration-i)%60)),t._play()}),t.audioMusic.addEventListener("waiting",function(){clearInterval(t.audioTimer)},!1),t.audioMusic.addEventListener("ended",function(){t.jump(!0)},!1)},audios:function(){this.audioMusic=this.getClass("audio-music")[0],this.audioImg=this.getClass("audio-img")[0].getElementsByTagName("img")[0],this.audioTitle=this.getClass("audio-title")[0],this.audioTime=this.getClass("audio-time")[0],this.audioImgBtn=this.getClass("audio-imgbtn")[0],this.audioLine=this.getClass("line-on")[0],this.sound=this.getClass("sound")[0],this.soundControl=this.getClass("sound-Control")[0],this.soundSlide=this.getClass("sound-slide")[0],this.audioFace()},audioFace:function(){this.audioImg.src=json[this.step-1].imgsrc,this.audioMusic.src=json[this.step-1].music,this.audioTitle.innerHTML="<p>"+json[this.step-1].title+"</p><span>"+json[this.step-1].author+"</span>",this.audioTime.innerHTML=json[this.step-1].time},jump:function(t){var i=this;t?(i.step++,i.step>json.length&&(i.step=1)):(i.step--,i.step<1&&(i.step=json.length)),i.rotateNum=0,i.audioFace(),i.audioMusic.play(),i._play()},_play:function(){var t=this;clearInterval(t.audioTimer),t.audioTimer=setInterval(function(){t.rotateNum++,t.rotateNum>=3600&&(t.rotateNum=1),t.flag&&(t.audioImg.style.WebkitTransform="rotate("+Math.ceil(t.rotateNum/10)+"deg)",t.audioImg.style.MozTransform="rotate("+Math.ceil(t.rotateNum/10)+"deg)",t.audioImg.style.OTransform="rotate("+Math.ceil(t.rotateNum/10)+"deg)",t.audioImg.style.transform="rotate("+Math.ceil(t.rotateNum/10)+"deg)")},1)},Events:function(){var t=this;this.audioUp=this.getClass("audio-up")[0],this.audioPlay=this.getClass("audio-play")[0],this.audioNext=this.getClass("audio-next")[0],this.audioPlay.onclick=function(){var i=this;t.flag?(t.audioMusic.pause(),t.addClass(i,"btn-off","btn-on"),t.addClass(t.audioImgBtn,"imgbtn-off","imgbtn-on"),t.flag=!1):(t.addClass(i,"btn-on","btn-off"),t.addClass(t.audioImgBtn,"imgbtn-on","imgbtn-off"),t.audioMusic.play(),t.flag=!0)},this.audioImgBtn.onclick=function(){var i=this;t.flag?(t.audioMusic.pause(),t.addClass(i,"imgbtn-off","imgbtn-on"),t.addClass(t.audioPlay,"btn-off","btn-on"),t.flag=!1):(t.addClass(i,"imgbtn-on","imgbtn-off"),t.addClass(t.audioPlay,"btn-on","btn-off"),t.audioMusic.play(),t.flag=!0)},this.audioUp.onclick=function(){t.flag&&t.jump(!1)},this.audioNext.onclick=function(){t.flag&&t.jump(!0)},this.soundSlide.onmousedown=function(i){var o=i||window.event,s=this,a=(i.clientX-s.offsetLeft,i.clientY-s.offsetTop);document.onmousemove=function(i){var o=i||window.event,n=i.clientY-a-50;s.style.left="0px",n<=-50?n=-50:n>=0&&(n=0),t.audioMusic.volume=(n/-50).toFixed(1),t.soundSlide.style.top=Math.floor(n)+"px",t.stopPropagation(o)},document.onmouseup=function(i){var o=i||window.event;document.onmousemove=null,document.onmouseup=null,t.stopPropagation(o)},t.stopPropagation(o)},this.sound.onclick=function(i){var o=i||window.event;if(t.flag){switch(t.soundStep++,t.soundStep){case 1:t.soundCtrFlag=!0,t.audioMusic.volume=1,t.soundControl.style.display="block",t.addClass(this,"sound-on","sound-off");break;case 2:t.soundCtrFlag=!1,t.soundControl.style.display="none";break;case 3:t.audioMusic.volume=0,t.soundStep=0,t.addClass(this,"sound-off","sound-on")}t.stopPropagation(o)}},document.onclick=function(i){var o=i||window.event;t.flag&&t.soundCtrFlag&&(t.soundCtrFlag=!1,t.soundControl.style.display="none",t.stopPropagation(o))},this.QQ.onclick=function(){window.location.href="http://wpa.qq.com/msgrd?v=3&uin=1575259223&site=qq&menu=yes"}}};t.Music=i}(window),window.onload=function(){Music.init()};