$(function(){function a(){w=setInterval(function(){s++,t++,720==s&&(s=0),y=E[u][4],v=100*c(y),F=Math.floor((v-t)/6e3),G=Math.floor((v-t-6e3*F)/100),H="-"+d(F)+":"+d(G),(t>=v||I)&&(t=0,u++,u==E.length&&(u=0),z=0,g.attr("src",E[u][2]),g.get(0).play(),f.attr("src",E[u][3]),h.html("<p>"+E[u][0]+"</p><span>"+E[u][1]+"</span>"),I=!1),J&&(t=0,u=0==u?E.length-1:--u,z=0,g.attr("src",E[u][2]),g.get(0).play(),f.attr("src",E[u][3]),h.html("<p>"+E[u][0]+"</p><span>"+E[u][1]+"</span>"),J=!1),i.html(H),z=(2.5/c(E[u][4])*t).toFixed(4),m.css({width:z}),f.get(0).style.transform="rotate("+Math.ceil(s/2)+"deg)"},10)}function b(){clearInterval(w)}function c(a){var b=a.split(":");return parseInt(60*b[0])+parseInt(b[1])}function d(a){return a>=10?a+"":10>a?"0"+a:void 0}function e(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}var f=$(".audio-img").find("img"),g=$(".audio-music"),h=$(".audio-title"),i=$(".audio-time"),j=$(".audio-play"),k=$(".audio-next"),l=$(".audio-up"),m=$(".line-on"),n=$(".audio-imgbtn"),o=$(".sound"),p=($(".music"),$(".sound-Control")),q=$(".sound-slide"),r=$(".qq"),s=0,t=0,u=0,v=0,w=null,x=!1,y=null,z=0,A=!0,B=!1,C=null,D=null,E=[];$.ajax({type:"GET",url:"./js/music.json",dataType:"json",success:function(a){for(var b=0;b<a.length;b++)E.push([]);$.each(a,function(a,b){E[a].push(b.title),E[a].push(b.author),E[a].push(b.music),E[a].push(b.imgsrc),E[a].push(b.time)})},async:!1});var F=0,G=0,H=0,I=!1,J=!1;r.click(function(){window.open("http://wpa.qq.com/msgrd?v=3&uin=356671808&site=qq&menu=yes","target","webQQ")}),h.html("<p>"+E[u][0]+"</p><span>"+E[u][1]+"</span>"),f.attr("src",E[u][3]),i.text(E[u][4]),g.attr("src",E[u][2]),q.get(0).onmousedown=function(a){var a=a||window.e,b=this;C=a.clientX-this.offsetLeft,D=a.clientY-this.offsetTop,document.onmousemove=function(a){var a=a||window.e,c=a.clientY-D-50;b.style.left="0px",-50>=c?c=-50:c>=0&&(c=0),g.get(0).volume=(c/-50).toFixed(1),q.get(0).style.top=Math.floor(c)+"px",e(a)},document.onmouseup=function(a){var a=a||window.e;document.onmousemove=null,document.onmouseup=null,e(a)},e(a)},$(document).bind("click",function(a){p.css({display:"none"})}),o.click(function(a){A?(p.css({display:"block"}),A=!1,e(a)):B?(g.get(0).volume=1,$(this).addClass("sound-on").removeClass("sound-off"),B=!1,A=!0,e(a)):(g.get(0).volume=0,$(this).addClass("sound-off").removeClass("sound-on"),B=!0,e(a))}),n.click(function(c){x?(b(),g.get(0).pause(),$(this).addClass("imgbtn-off").removeClass("imgbtn-on"),j.addClass("btn-off").removeClass("btn-on"),x=!1,e(c)):(a(),g.get(0).play(),$(this).addClass("imgbtn-on").removeClass("imgbtn-off"),j.addClass("btn-on").removeClass("btn-off"),x=!0,e(c))}),j.click(function(c){x?(b(),g.get(0).pause(),n.addClass("imgbtn-off").removeClass("imgbtn-on"),j.addClass("btn-off").removeClass("btn-on"),x=!1,e(c)):(a(),g.get(0).play(),j.addClass("btn-on").removeClass("imgbtn-off"),n.addClass("imgbtn-on").removeClass("imgbtn-off"),x=!0,e(c))}),k.click(function(a){I=!0,e(a)}),l.click(function(a){J=!0,e(a)})});
